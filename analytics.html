<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Analytics • SmartForm</title>

  <link rel="stylesheet" href="css/style.css" />

  <!-- Chart.js CDN -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>

<!-- Header -->
<header class="app-header">
  <a href="index.html" class="logo">SmartForm</a>

  <button class="menu-toggle" id="menuToggle">☰</button>

  <nav class="header-nav" id="headerNav">
    <a href="builder.html">Builder</a>
    <a href="form.html">Public Form</a>
  </nav>
</header>

<!-- Analytics Page -->
<main class="analytics-page">
  <h2>Form Analytics</h2>
  <p class="muted">Visual insights from submitted responses</p>

  <!-- Stats -->
  <div class="analytics-cards">
    <div class="card">
      <h3>Total Responses</h3>
      <p id="responseCount">0</p>
    </div>
  </div>

  <!-- Chart -->
  <div class="card">
    <h3>Responses Over Time</h3>
    <canvas id="responseChart"></canvas>
  </div>

  <!-- Export -->
  <div class="card">
    <h3>Export Data</h3>
    <button class="btn primary full" id="exportCsv">
      Download CSV
    </button>
  </div>

  <!-- Details -->
  <div id="analyticsDetails"></div>
</main>

<!-- Mobile Menu -->
<script>
  document.getElementById("menuToggle").onclick = () => {
    document.getElementById("headerNav").classList.toggle("open");
  };
</script>

<script src="js/analytics.js"></script>
<script src="js/roles.js"></script>
<script>requireAdmin();</script>
</body>
</html>
